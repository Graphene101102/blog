<div class="container py-4">
  {{#if isAuthenticated}}
  <div class="card shadow-sm mb-4 position-relative">
    <a href="/auth/settings" class="btn btn-light border position-absolute" style="top: 12px; right: 12px;">
      <i class="oi oi-cog"></i>
    </a>
    <div class="card-body">
      <div class="d-flex align-items-center">
        <img src="{{#if user.avatar}}{{user.avatar}}{{else}}/img/logo.png{{/if}}" alt="avatar" class="rounded-circle me-3" style="width: 80px; height: 80px; object-fit: cover;">
        <div class="flex-grow-1">
          <h4 class="mb-1">{{#if user.firstName}}{{user.firstName}} {{/if}}{{user.lastName}}</h4>
          <div class="d-flex align-items-center gap-2 text-muted small">
            <span><i class="oi oi-person me-1"></i>{{user.email}}</span>
            {{#if user.role}}
              <span class="mx-2">•</span>
              <span class="badge bg-primary text-uppercase">{{user.role}}</span>
            {{/if}}
          </div>
        </div>
      </div>

      {{#if user.bio}}
      <div class="mt-3">
        <p class="mb-0">{{user.bio}}</p>
      </div>
      {{/if}}

      <div class="row text-center mt-3 g-3">
        <div class="col-6 col-md-3">
          <div class="p-2 border rounded">
            <div class="small text-muted">Bài đăng</div>
            <div class="fs-5 fw-semibold">{{#if courses}}{{courses.length}}{{else}}0{{/if}}</div>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="p-2 border rounded">
            <div class="small text-muted">Email</div>
            <div class="fw-semibold text-truncate">{{user.email}}</div>
          </div>
        </div>
        {{#if user.phone}}
        <div class="col-6 col-md-3">
          <div class="p-2 border rounded">
            <div class="small text-muted">SĐT</div>
            <div class="fw-semibold">{{user.phone}}</div>
          </div>
        </div>
        {{/if}}
        {{#if user.isEmailVerified}}
        <div class="col-6 col-md-3">
          <div class="p-2 border rounded">
            <div class="small text-muted">Trạng thái</div>
            <div class="fw-semibold text-success"><i class="oi oi-check me-1"></i>Đã xác minh</div>
          </div>
        </div>
        {{/if}}
      </div>
    </div>
  </div>

  <div class="d-flex align-items-center justify-content-between mb-3">
    <h5 class="mb-0">Bài đăng của bạn</h5>
    <a class="btn btn-sm btn-primary" href="/courses/create"><i class="oi oi-plus me-1"></i>Tạo bài đăng</a>
  </div>

  {{#if courses}}
    {{#if courses.length}}
    <div class="row g-3">
      {{#each courses}}
      <div class="col-sm-6 col-lg-4">
        <div class="card h-100 shadow-sm">
          <a href="/courses/{{this.slug}}">
            <img src="{{this.image}}" class="card-img-top" alt="{{this.name}}" style="height: 180px; object-fit: cover;">
          </a>
          <div class="card-body d-flex flex-column">
            <a href="/courses/{{this.slug}}" class="text-decoration-none text-dark"><h6 class="card-title mb-2">{{this.name}}</h6></a>
            <p class="card-text text-muted small flex-grow-1">{{this.description}}</p>
            <div class="d-flex align-items-center justify-content-between mt-2">
              <a href="/courses/{{this.slug}}" class="btn btn-outline-primary btn-sm"><i class="oi oi-eye me-1"></i>Xem</a>
              <small class="text-muted">Cập nhật: {{this.updatedAt}}</small>
            </div>
          </div>
        </div>
      </div>
      {{/each}}
    </div>
    {{else}}
      <div class="text-center text-muted py-5 border rounded">
        <p class="mb-2"><i class="oi oi-document me-2"></i>Chưa có bài đăng nào.</p>
        <a class="btn btn-sm btn-primary" href="/courses/create"><i class="oi oi-plus me-1"></i>Tạo bài đăng đầu tiên</a>
      </div>
    {{/if}}
  {{else}}
    <div class="text-center text-muted py-5 border rounded">
      <p class="mb-0">Không tìm thấy dữ liệu bài đăng.</p>
    </div>
  {{/if}}

  {{else}}
  <div class="text-center py-5">
    <p class="lead mb-3">Bạn cần đăng nhập để xem trang cá nhân.</p>
    <a class="btn btn-primary" href="/auth/login"><i class="oi oi-account-login me-1"></i>Đăng nhập</a>
  </div>
  {{/if}}
</div>